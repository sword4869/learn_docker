import{_ as a,V as n,W as i,Y as t,$ as l,a0 as o,X as e,D as r,Z as c}from"./framework-48406333.js";const d={},p=e(`<ul><li><a href="#1-list-image">1. List image</a><ul><li><a href="#11-list">1.1. list</a></li><li><a href="#12-specify-list">1.2. Specify list</a></li></ul></li><li><a href="#2-remove-image">2. Remove image</a><ul><li><a href="#21-remove">2.1. remove</a></li><li><a href="#22-dangling-image">2.2. dangling image</a></li></ul></li><li><a href="#3-create">3. Create</a><ul><li><a href="#31-get-remote-sources">3.1. Get remote sources</a></li><li><a href="#32-commit">3.2. Commit</a></li><li><a href="#33-dockerfile">3.3. Dockerfile</a></li></ul></li><li><a href="#4-push-to-registry">4. Push to Registry</a></li><li><a href="#5-history">5. History</a></li></ul><hr><h1 id="_1-list-image" tabindex="-1"><a class="header-anchor" href="#_1-list-image" aria-hidden="true">#</a> 1. List image</h1><h2 id="_1-1-list" tabindex="-1"><a class="header-anchor" href="#_1-1-list" aria-hidden="true">#</a> 1.1. list</h2><p><code>ls/list</code></p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>$ <span class="token function">docker</span> image <span class="token function">ls</span>
REPOSITORY               TAG               IMAGE ID       CREATED        SIZE
python                   <span class="token number">3.8</span>-slim-buster   9f9436d44487   <span class="token number">2</span> months ago   114MB
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>这个镜像的名字，<code>python</code> Respository 和 <code>3.8-slim-buster</code> Tag, 一起构成 <code>python:3.8-slim-buster</code>。</p><ul><li>镜像的命名规则，<code>user-name/image-name:tag</code>。 比如<code>sandal33s/helloworld:1.0</code>，<code>sandal33s/helloworld:v3</code>。</li><li>默认 user-name 和默认 Tag : 官方镜像默认<code>user-name</code>是<code>library</code>，且可以不显示。 默认 Tag 是<code>latest</code>，且可以不显示。 比如，<code>ubuntu</code>就是<code>library/ubuntu:latest</code>。</li></ul><h2 id="_1-2-specify-list" tabindex="-1"><a class="header-anchor" href="#_1-2-specify-list" aria-hidden="true">#</a> 1.2. Specify list</h2><blockquote><p>according name</p></blockquote><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>$ <span class="token function">docker</span> image list ubuntu
$ <span class="token function">docker</span> image list ubuntu:18:04
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>according time</p></blockquote><p><code>-f/--filter</code></p><p>This is the time to create, not the time to pull.</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment"># after </span>
$ <span class="token function">docker</span> image list <span class="token parameter variable">-f</span> <span class="token assign-left variable">since</span><span class="token operator">=</span>ubuntu

<span class="token comment"># before</span>
$ <span class="token function">docker</span> image list <span class="token parameter variable">-f</span> <span class="token assign-left variable">before</span><span class="token operator">=</span>ubuntu
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>only get image id</p></blockquote><p><code>-q/--quiet</code></p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>$ <span class="token function">docker</span> image list <span class="token parameter variable">-q</span>
cd70c686e299
2c84f43aada3
e983e5d89352
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>This is used to pass the result to remove command.</p><h1 id="_2-remove-image" tabindex="-1"><a class="header-anchor" href="#_2-remove-image" aria-hidden="true">#</a> 2. Remove image</h1><p>要删除镜像，就得先把和它的容器都删完了，然后才能删镜像。这是因为Layer filesystem，最下层是镜像，所以删除镜像就有容器依赖丢失问题。</p><h2 id="_2-1-remove" tabindex="-1"><a class="header-anchor" href="#_2-1-remove" aria-hidden="true">#</a> 2.1. remove</h2><blockquote><p>according id</p></blockquote><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>$ <span class="token function">docker</span> image list
REPOSITORY               TAG               IMAGE ID       CREATED        SIZE
kalilinux/kali-rolling   latest            cd70c686e299   <span class="token number">2</span> days ago     126MB

<span class="token comment"># short id</span>
$ <span class="token function">docker</span> image <span class="token function">rm</span> cd7
<span class="token comment"># long id</span>
$ <span class="token function">docker</span> image <span class="token function">rm</span> cd70c686e299
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>according name</p></blockquote><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>$ <span class="token function">docker</span> image <span class="token function">rm</span> ubuntu:18.04
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="_2-2-dangling-image" tabindex="-1"><a class="header-anchor" href="#_2-2-dangling-image" aria-hidden="true">#</a> 2.2. dangling image</h2><p>quick remove all dangling images.</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>$ <span class="token function">docker</span> image prune
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h1 id="_3-create" tabindex="-1"><a class="header-anchor" href="#_3-create" aria-hidden="true">#</a> 3. Create</h1><h2 id="_3-1-get-remote-sources" tabindex="-1"><a class="header-anchor" href="#_3-1-get-remote-sources" aria-hidden="true">#</a> 3.1. Get remote sources</h2><p>When you use the <code>docker pull</code> or <code>docker run</code> commands, the required images are pulled from your configured registry.</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>$ <span class="token function">docker</span> pull ubuntu:18.04
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>$ <span class="token function">docker</span> run ubuntu:18.04
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="_3-2-commit" tabindex="-1"><a class="header-anchor" href="#_3-2-commit" aria-hidden="true">#</a> 3.2. Commit</h2><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment"># docker commit &lt;container name&gt; &lt;image name&gt;</span>
$ <span class="token function">docker</span> commit webserver nginx:v2
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>一些特殊的应用场合，比如被入侵后保存现场等。</p><p>使用 docker commit 意味着所有对镜像的操作都是黑箱操作，生成的镜像也被称为 黑箱镜像。</p><p>所以，不要使用 docker commit 定制镜像，定制镜像应该使用 Dockerfile 来完成。</p><h2 id="_3-3-dockerfile" tabindex="-1"><a class="header-anchor" href="#_3-3-dockerfile" aria-hidden="true">#</a> 3.3. Dockerfile</h2>`,40),u=e(`<h1 id="_4-push-to-registry" tabindex="-1"><a class="header-anchor" href="#_4-push-to-registry" aria-hidden="true">#</a> 4. Push to Registry</h1><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>$ <span class="token function">docker</span> image push
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>your image is pushed to your configured registry.</p><h1 id="_5-history" tabindex="-1"><a class="header-anchor" href="#_5-history" aria-hidden="true">#</a> 5. History</h1><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>$ <span class="token function">docker</span> image <span class="token function">history</span> python-docker-dev
IMAGE          CREATED        CREATED BY                                      SIZE      COMMENT
e983e5d89352   <span class="token number">2</span> months ago   CMD <span class="token punctuation">[</span><span class="token string">&quot;python3&quot;</span> <span class="token string">&quot;-m&quot;</span> <span class="token string">&quot;flask&quot;</span> <span class="token string">&quot;run&quot;</span> <span class="token string">&quot;--host=0.…   0B        buildkit.dockerfile.v0
&lt;missing&gt;      2 months ago   RUN /bin/sh -c pip3 install -r requirements.…   163MB     buildkit.dockerfile.v0
&lt;missing&gt;      2 months ago   COPY . . # buildkit                             3.79kB    buildkit.dockerfile.v0
&lt;missing&gt;      2 months ago   WORKDIR /app                                    0B        buildkit.dockerfile.v0
&lt;missing&gt;      2 months ago   /bin/sh -c #(nop)  CMD [&quot;</span>python3<span class="token string">&quot;]              0B
&lt;missing&gt;      2 months ago   /bin/sh -c set -eux;   savedAptMark=&quot;</span><span class="token punctuation">$(</span>apt-m…   <span class="token number">9</span>.46MB
<span class="token operator">&lt;</span>missing<span class="token operator">&gt;</span>      <span class="token number">2</span> months ago   /bin/sh <span class="token parameter variable">-c</span> <span class="token comment">#(nop)  ENV PYTHON_GET_PIP_SHA256…   0B</span>
<span class="token operator">&lt;</span>missing<span class="token operator">&gt;</span>      <span class="token number">2</span> months ago   /bin/sh <span class="token parameter variable">-c</span> <span class="token comment">#(nop)  ENV PYTHON_GET_PIP_URL=ht…   0B</span>
<span class="token operator">&lt;</span>missing<span class="token operator">&gt;</span>      <span class="token number">2</span> months ago   /bin/sh <span class="token parameter variable">-c</span> <span class="token comment">#(nop)  ENV PYTHON_SETUPTOOLS_VER…   0B</span>
<span class="token operator">&lt;</span>missing<span class="token operator">&gt;</span>      <span class="token number">2</span> months ago   /bin/sh <span class="token parameter variable">-c</span> <span class="token comment">#(nop)  ENV PYTHON_PIP_VERSION=21…   0B</span>
<span class="token operator">&lt;</span>missing<span class="token operator">&gt;</span>      <span class="token number">2</span> months ago   /bin/sh <span class="token parameter variable">-c</span> <span class="token builtin class-name">set</span> -eux<span class="token punctuation">;</span>  <span class="token keyword">for</span> <span class="token for-or-select variable">src</span> <span class="token keyword">in</span> idle3 pydoc…   92B
<span class="token operator">&lt;</span>missing<span class="token operator">&gt;</span>      <span class="token number">2</span> months ago   /bin/sh <span class="token parameter variable">-c</span> <span class="token builtin class-name">set</span> -eux<span class="token punctuation">;</span>   <span class="token assign-left variable">savedAptMark</span><span class="token operator">=</span><span class="token string">&quot;$(apt-m…   28.5MB
&lt;missing&gt;      3 months ago   /bin/sh -c #(nop)  ENV PYTHON_VERSION=3.8.12    0B
&lt;missing&gt;      3 months ago   /bin/sh -c #(nop)  ENV GPG_KEY=E3FF2839C048B…   0B
&lt;missing&gt;      3 months ago   /bin/sh -c set -eux;  apt-get update;  apt-g…   7.06MB
&lt;missing&gt;      3 months ago   /bin/sh -c #(nop)  ENV LANG=C.UTF-8             0B
&lt;missing&gt;      3 months ago   /bin/sh -c #(nop)  ENV PATH=/usr/local/bin:/…   0B
&lt;missing&gt;      3 months ago   /bin/sh -c #(nop)  CMD [&quot;</span>bash&quot;<span class="token punctuation">]</span>                 0B
<span class="token operator">&lt;</span>missing<span class="token operator">&gt;</span>      <span class="token number">3</span> months ago   /bin/sh <span class="token parameter variable">-c</span> <span class="token comment">#(nop) ADD file:c51141702f568a28a…   69.3MB</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,5);function m(h,g){const s=r("RouterLink");return n(),i("div",null,[p,t("p",null,[l(s,{to:"/2-image/the_dockerfile.html"},{default:o(()=>[c("the_dockerfile.md")]),_:1})]),u])}const v=a(d,[["render",m],["__file","image.html.vue"]]);export{v as default};
